# test provisioning corresponding to the Vagrantfile

- hosts: gameserver
  user: vagrant
  become: yes

  pre_tasks:
  - name: install packages
    apt:
      name: ca-certificates
      state: present

  roles:
  - ctfd-server

- hosts: gameclient??
  user: vagrant
  become: yes

  vars:
    run_tests: true

  roles:
  - basesystem
  - { role: ctfd-server, include_ctfc: true, include_ctfd: false }

  #~ post_tasks:
  #~ - meta: flush_handlers
  #~
  #~ - name: do tests
    #~ include: tests.yml
    #~ when: run_tests
